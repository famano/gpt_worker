# 自動タスク管理フレームワーク

このプロジェクトは、PythonとOpenAIのAPIを活用した自動タスク管理フレームワークです。インテリジェントなタスク計画と実行をシームレスに統合するように設計されており、機械学習モデルとの対話を通じてタスクシーケンスを自律的に管理し、動的なワークフローを実現します。

## 主要コンポーネント

1. **agents.py**: タスクを自動化する`Planner`、`Worker`、`Orchestrator`クラスを定義します。これらのエージェントは協調して作業を実行します。

2. **tools.py**: エージェントが使用する各種ツールとユーティリティを提供します。ファイル操作、状態更新、スクリプト実行などの基本機能を実装します。

3. **connector.py**: `OpenAIConnector`クラスを通じてOpenAIのAPIとの接続を管理し、インテリジェントな応答を可能にします。

4. **cli.py**: コマンドラインインターフェースを提供し、ユーザーが簡単にタスクを実行・管理できるようにします。

5. **main.py**: フレームワークのコア機能を実装し、エージェント間の調整とタスクの実行を管理します。

6. **constants.py**: フレームワーク全体で使用される定数と設定値を定義します。

7. **dataholder.py**: データの保持と管理を担当し、エージェント間でのデータ共有を可能にします。

## ディレクトリ構造

```
gpt_worker/
├── gpt_worker/          # メインのソースコード
│   ├── agents.py
│   ├── cli.py
│   ├── connector.py
│   ├── constants.py
│   ├── dataholder.py
│   ├── main.py
│   └── tools.py
├── tests/               # テストファイル
│   ├── test_agents.py
│   ├── test_agents_integration.py
│   └── test_tools.py
└── logs/                # 実行ログ
```

## セットアップとテスト

環境に必要なAPIキーが設定されていることを確認してください：

```bash
echo $OPENAI_API_KEY
```

機能を検証するには、以下を実行します：

```bash
pytest tests/
```

これにより、`tests`ディレクトリ内のすべての利用可能な単体テストとインテグレーションテストが実行され、コンポーネントが確実に連携して動作することを確認します。

## API連携

このフレームワークは、OpenAIのAPIとインターフェースを持ち、`OpenAIConnector`を使用してタスク関連のクエリと応答を解釈します。APIキーが`OPENAI_API_KEY`という名前の環境変数として設定されていることを確認してください。

## インストール

このパッケージをインストールするには、このリポジトリをクローンして、以下のコマンドを実行します：

```bash
pip install .
```

インストールが完了すると、`gptw`コマンドが使用可能になります。

## 使用方法

### 基本的なコマンド

```bash
# 新しいワークスペースの初期化
gptw init [ディレクトリ]

# タスクの実行
gptw run [指示] [オプション]

# 現在のタスクリストの表示
gptw list

# 現在の状態サマリーの表示
gptw status
```

### コマンドオプション

#### グローバルオプション
- `--verbose`: 詳細な出力を有効にします

#### `run`コマンドのオプション
- `--model, -m`: 使用するLLMモデルを指定（デフォルト: gpt-4-1106-preview）
- `--directory, -d`: 作業ディレクトリを指定

#### `init`、`list`、`status`コマンドのオプション
- `--directory, -d`: 作業ディレクトリを指定

### 使用例

```bash
# 新しいワークスペースの作成
gptw init myproject

# タスクの実行（GPT-4を使用）
gptw run "Webサイトのデザインを改善してください" --model gpt-4

# 詳細な出力を有効にしてタスクを実行
gptw run --verbose

# 特定のディレクトリでタスクリストを表示
gptw list --directory myproject

# 現在の状態を確認
gptw status
```

## 貢献とワークフロー

機能の拡張や新しいテストの追加によって貢献できます。フレームワークの整合性を維持するため、提供されているテストスイートで変更を検証してください。また、新しい機能を追加する際は、適切なテストを作成し、既存のコードスタイルに従ってください。
